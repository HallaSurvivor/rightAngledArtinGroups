\documentclass[12pt]{article}
% \documentclass[10pt,xcolor={dvipsnames}]{beamer}
% \usetheme{Berlin}

%{{{ Preamble

%%%%%%%%{{{ Packages
%%%%%%%%%%%%%%%%%%%%

% the default margins have always felt big to me
% if beamer: comment this out
\usepackage[margin=4cm]{geometry}

% we're gay, we like colors
% if beamer: comment this out
\usepackage[dvipsnames]{xcolor}

% we aren't animals - we might use more than ASCII
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

% obligatory math environments, symbols, and theorems
\usepackage{amsmath, amssymb, amsthm}

% moar symbols
\usepackage{stmaryrd}

% obligatory citation library
\usepackage{natbib}

% sometimes you gotta draw stuff, like _c_ommutative _d_iagrams.
\usepackage{tikz, tikz-cd}

% sometimes you gotta put in pretty pictures
\usepackage{graphicx}

% sometimes you gotta write code
\usepackage{listings}

% proof trees are useful
\usepackage{proof}

% use \mathbbm for bb-numerals, use \bm for bold math symbols.
\usepackage{bbm, bm}

% I like clickable links in pdfs
\usepackage{hyperref}

% Convenient todo-notes and missing figure boxes
\usepackage[textwidth=3.7cm]{todonotes}
\setlength{\marginparwidth}{3.7cm}

% remove paragraph indentation
\usepackage{parskip}

% allow fancy stuff (custom headers and footers)
\usepackage{fancyhdr}

% pretty boxes are pretty
\usepackage[framemethod=TikZ]{mdframed}

%q.uiver
\usepackage{quiver}

%}}}

%%%%%%%%{{{ Formatting
%%%%%%%%%%%%%%%%%%%%%%

% prevent orphans/widows
\clubpenalty = 10000
\widowpenalty = 10000

% never break words across lines -- hyphens are stupid
\hyphenpenalty 10000
\exhyphenpenalty 10000

% forcibly overlay two symbols on top of each other
% used for the \cupdot and \bigcupdot commands
% shamelessly taken from here:
% https://tex.stackexchange.com/questions/3964/
%   mathematical-symbol-for-disjoint-set-union
\makeatletter
\def\moverlay{\mathpalette\mov@rlay}
\def\mov@rlay#1#2{\leavevmode\vtop{%
   \baselineskip\z@skip \lineskiplimit-\maxdimen
   \ialign{\hfil$\m@th#1##$\hfil\cr#2\crcr}
}}
\newcommand{\charfusion}[3][\mathord]{
    #1{\ifx#1\mathop\vphantom{#2}\fi
        \mathpalette\mov@rlay{#2\cr#3}
      }
    \ifx#1\mathop\expandafter\displaylimits\fi}
\makeatother


%}}}

%%%%%%%%{{{ Environments
%%%%%%%%%%%%%%%%%%%%%%%%

\newtheorem{thm}{Theorem}
\newtheorem*{thm*}{Theorem}

\newtheorem*{rmk}{Remark}

% add some slashes to mark the end of a definition. 
% shamelessly stolen from 
% https://tex.stackexchange.com/
% questions/291346/marking-the-end-of-a-definition

\theoremstyle{definition}
\newtheorem{defn/}{Definition}
\newtheorem*{defn*/}{Definition}

\newcommand{\defnendsymbol}%
{%
  \mathbin{\rotatebox[origin=c]{-45}{$\parallel$}}%
}

\newenvironment{defn}
  {\renewcommand{\qedsymbol}{$\defnendsymbol$}%
   \pushQED{\qed}\begin{defn/}}
  {\popQED\end{defn/}}

\newenvironment{defn*}
  {\renewcommand{\qedsymbol}{$\defnendsymbol$}%
   \pushQED{\qed}\begin{defn*/}}
  {\popQED\end{defn*/}}

% stuff for submitting homeworks
% beamer: comment out all 3 
\theoremstyle{theorem}

\newtheorem*{problem}{Problem}

\newenvironment{soln}{\begin{proof}[Solution]}{\end{proof}}

%}}}

%%{{{ Aliases and Commands
%%%%%%%%%%%%%%%%%%%%%%%%%%

%{{{ blackboard letters
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
%}}}

%{{{ categories
\newcommand*{\catFont}[1]{\mathsf{#1}} 
\newcommand*{\catVarFont}[1]{\mathcal{#1}}

\newcommand{\Set}{\catFont{Set}}
\newcommand{\Top}{\catFont{Top}}
\newcommand{\Cat}{\catFont{Cat}}
\newcommand{\Grp}{\catFont{Grp}}
\newcommand{\Mod}{\catFont{Mod}}
\newcommand{\Sub}{\catFont{Sub}}
\newcommand{\FP}{\catFont{FP}}
\newcommand{\Pos}{\catFont{Pos}}
\newcommand{\FinSet}{\catFont{FinSet}}

\newcommand{\catA}{\catVarFont{A}}
\newcommand{\catB}{\catVarFont{B}}
\newcommand{\catC}{\catVarFont{C}}
\newcommand{\catD}{\catVarFont{D}}
\newcommand{\catE}{\catVarFont{E}}
\newcommand{\catX}{\catVarFont{X}}
\newcommand{\catY}{\catVarFont{Y}}
\newcommand{\catz}{\catVarFont{Z}}
%}}}

%{{{ arrows
\newcommand{\hookr}{\hookrightarrow}
\newcommand{\hookl}{\hookleftarrow}
\newcommand{\monor}{\rightarrowtail}
\newcommand{\monol}{\leftarrowtail}
\newcommand{\epir}{\twoheadrightarrow}
\newcommand{\epil}{\twoheadleftarrow}
\newcommand{\regepir}{\rightarrowtriangle}
\newcommand{\regepil}{\leftarrowtriangle}
%}}}

%{{{ categorical limits
\newcommand{\limr}{\varinjlim}
\newcommand{\liml}{\varprojlim}
%}}}

%{{{ analysis
\DeclareMathOperator{\dif}{d \!}
\DeclareMathOperator{\Dif}{D \!}
\newcommand{\del}{\partial}
\newcommand*{\abs}[1]{\left \lvert #1 \right \rvert}
\newcommand*{\norm}[1]{\left \lVert #1 \right \rVert}
\newcommand*{\eval}[1]{\left . #1 \right \rvert}

\newcommand*{\dx}{\ \dif x}
\newcommand*{\dy}{\ \dif x}
\newcommand*{\ds}{\ \dif s}
\newcommand*{\dt}{\ \dif t}

\newcommand*{\dm}{\ \dif m}
\newcommand*{\dmu}{\ \dif \mu}
\newcommand*{\dlambda}{\ \dif \lambda}

% partial derivative command (taken from commath package)
% usage: \pd[n]{f}{x}
\newcommand*{\pd}[3][]{\ensuremath{
\ifinner
\tfrac{\partial{^{#1}}#2}{ \partial{#3^{#1}} }
\else
\dfrac{\partial{^{#1}}#2}{ \partial{#3^{#1}} }
\fi
}}

% ordinary derivative command (taken from commath package)
% usage: \od[n]{f}{x}
\newcommand*{\od}[3][]{\ensuremath{
\ifinner
\tfrac{\dif{^{#1}}#2}{ \dif{#3^{#1}} }
\else
\dfrac{\dif{^{#1}}#2}{ \dif{#3^{#1}} }
\fi
}}

% restriction of a map
\newcommand*{\restrict}{\upharpoonright}

% almost everywhere
\renewcommand*{\ae}{~\mathrm{a.e.}}

% disjoint union
\newcommand{\dotcup}{\charfusion[\mathbin]{\cup}{\cdot}}
\newcommand{\bigdotcup}{\charfusion[\mathop]{\bigcup}{\cdot}}

% I can't ever remember which one it is... 
% So just have both so I can't be wrong
\newcommand{\cupdot}{\charfusion[\mathbin]{\cup}{\cdot}}
\newcommand{\bigcupdot}{\charfusion[\mathop]{\bigcup}{\cdot}}

% indicator function
% change to \chi, make it a subscript, etc. as necessary
\newcommand{\ind}[1]{\mathbbm{1}[#1]}

% epsilon alias... I really am this lazy
\newcommand{\eps}{\epsilon}

%}}}

%{{{ algebra
\newcommand{\meet}{\wedge}
\newcommand{\join}{\vee}
\newcommand{\id}{\mathrm{id}}
\newcommand{\normal}{\vartriangleleft}

\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\coker}{coker}

\DeclareMathOperator{\Tor}{Tor}
\DeclareMathOperator{\Ext}{Ext}
%}}}

%{{{ number theory
\DeclareMathOperator{\Li}{Li}
%}}}

%{{{ topology
\newcommand*{\interior}[1]{ {\kern0pt#1}^{\mathrm{o}} }
%}}}

%{{{ lie theory

\newcommand*{\LieGrpFont}{\mathsf}

\newcommand*{\GLC}[1]{\LieGrpFont{GL}(#1,\C)}
\newcommand*{\GLR}[1]{\LieGrpFont{GL}(#1,\R)}
\newcommand*{\GLH}[1]{\LieGrpFont{GL}(#1,\mathbb{H})}

\newcommand*{\SLC}[1]{\LieGrpFont{SL}(#1,\C)}
\newcommand*{\SLR}[1]{\LieGrpFont{SL}(#1,\R)}
\newcommand*{\SLH}[1]{\LieGrpFont{SL}(#1,\mathbb{H})}

\newcommand*{\U}[1]{\LieGrpFont{U}(#1)}
\renewcommand*{\O}[1]{\LieGrpFont{O}(#1)}

\newcommand*{\SU}[1]{\LieGrpFont{SU}(#1)}
\newcommand*{\SO}[1]{\LieGrpFont{SO}(#1)}

\newcommand*{\Sp}[1]{\LieGrpFont{Sp}(#1)}

\newcommand*{\Spin}[1]{\LieGrpFont{Spin}(#1)}

%}}}

%{{{ logic
\renewcommand{\diamond}{\lozenge}
\newcommand*{\denote}[1]{\llbracket #1 \rrbracket}

% \godelnum command, stolen from 
% https://www.logicmatters.net/
% 	latex-for-logicians/symbols/corner-quotes-for-godel-numbers/
\newbox\gnBoxA
\newdimen\gnCornerHgt
\setbox\gnBoxA=\hbox{$\ulcorner$}
\global\gnCornerHgt=\ht\gnBoxA
\newdimen\gnArgHgt
\def\godelnum #1{%
\setbox\gnBoxA=\hbox{$#1$}%
\gnArgHgt=\ht\gnBoxA%
\ifnum     \gnArgHgt<\gnCornerHgt \gnArgHgt=0pt%
\else \advance \gnArgHgt by -\gnCornerHgt%
\fi \raise\gnArgHgt\hbox{$\ulcorner$} \box\gnBoxA %
\raise\gnArgHgt\hbox{$\urcorner$}}

% coding function
\newcommand*{\code}[1]{\langle #1 \rangle}

% we have \models, but for some reason not \proves?
\newcommand*{\proves}{\vdash}
\newcommand*{\forces}{\Vdash}

%}}}

%{{{ misc symbols
\newcommand{\teq}{\triangleq}
\newcommand{\fin}{ \subseteq_{\text{fin}} }

% important words
\newcommand*{\important}[1]{\textcolor{MidnightBlue}{#1}}

% define a "danger" symbol for use when something surprising might occur
% https://tex.stackexchange.com/questions/159669/
% 	how-to-print-a-warning-sign-triangle-with-exclamation-point
% use outside of math mode!

\newcommand*{\TakeFourierOrnament}[1]{{%
\fontencoding{U}\fontfamily{futs}\selectfont\char#1}}
\newcommand*{\danger}{\TakeFourierOrnament{66}}

% I always forget if this is named "danger" or "warning"...
% So just name it both so I can't be wrong
\newcommand*{\warning}{\danger}

%}}}

%}}}

%% project specific aliases (if they exist)
\IfFileExists{../preamble.tex}{\input{../preamble.tex}}{}

%}}}

%% Heading
\author{Chris Grossack\\ (they/them)}
\title{A Descent Theorem for Right Angled Artin Groups}

\begin{document}
\maketitle

\begin{abstract}
  We can associate to each graph $G$ a group $AG$, called a
  \emph{right angled artin group}, freely generated by the vertices
  of $G$ with the relation that two vertices commute if and only if 
  they're adjacent in $G$. This association is functorial, so that 
  every graph homomorphism induces a group homomorphism. 
  A natural question is to try characterize which group homomorphisms
  arise in this way, and in this paper we provide an effective 
  method for detecting these homomorphisms. We do this by applying the
  methodology of \emph{comonadic descent} to the category of groups,
  and thus find the category of graphs as a certain subcategory.
\end{abstract}

\section{Introduction}
\label{intro}

  For us, a \important{Graph} $\Gamma$ with underlying vertex set $V$ is a 
  symmetric, reflexive relation on $V$. A \important{Graph Homomorphism} between 
  a graph $\Gamma$ (with vertex set $V$) and $\Delta$ (with vertex set $W$) is a 
  function $f : V \to W$ so that $(v_1, v_2) \in \Gamma \implies (f v_1, f v_2) \in \Delta$.
  These obviously assemble into a category, which we call $\mathsf{Gph}$.

  Given a graph $\Gamma$ with vertex set $V$, we can form a group $A\Gamma$, the 
  \important{Right Angled Artin Group} (Raag) associated to $\Gamma$, defined as

  \[ A\Gamma \teq \langle v \in V \mid [v_1, v_2] = 1 \text{ whenever } (v_1,v_2) \in \Gamma \rangle .\]

  For example, if $\Gamma$ is a complete graph on $n$ vertices then 
  $A\Gamma \cong \mathbb{Z}^n$, and if $\Gamma$ is a discrete graph on $n$ vertices
  $A\Delta \cong \mathbb{F}_n$ is a free group on $n$ generators. 
  In this sense, raags allow us to \emph{interpolate} between free and free
  abelian groups.

  Raags are of particular interest to geometric group theorists because
  of their connections to the fundamental groups of closed hyperbolic
  $3$-manifolds \cite{servatiusSURFACESUBGROUPSGRAPH}
  \todo{there might be a better citation for this}
  and to the mapping class groups of hyperbolic surfaces 
  \cite{kimGeometryCurveGraph2014}.
  These groups are incredibly complicated in general, and by relating
  them to raags, we're able to study their geometry by leveraging
  the combinatorics of the underlying graph of the raag.

  Moreover, a surprising amount of the combinatorics of $\Gamma$ is 
  reflected in the algebra of $A\Gamma$. For instance, the
  cohomology of $A \Gamma$ is the \emph{exterior face algebra} 
  of $\Gamma$
  \cite{sabalkaRigidityIsomorphismProblem2009a},
  $A\Gamma$ factors as a direct product if and only if $\Gamma$ factors
  as a join of two graphs \cite{servatiusAutomorphismsGraphGroups1989b}.
  This correspondence can be pushed remarkably far, and recently it was
  shown that an \important{expander graph}\footnote{which is really a sequence of graphs}
  can be recognized from the cohomology of its raag 
  \cite{floresExpandersRightangledArtin2020}! This same paper includes a 
  lovely survey of other results connecting the combinatorics of $\Gamma$
  with the algebra of $A\Gamma$.

  With this in mind, it is natural to ask whether the combinatorics
  of graph homomorphisms are \emph{also} faithfully reflected in the 
  group homomorphisms between raags. The main result of this paper shows
  that the answer is \emph{yes}, and indeed we can recognize the category
  of graphs $\mathsf{Gph}$ as the subcategory of groups equipped with 
  certain \important{descent data}. \todo{expand on this} 

  \todo[inline]{Story: People have long noticed that combinatorial 
  information about a graph is faithfully reflected in its raag. 
  (Cite recovering the graph, expanders, $F_2 \times F_2$ if and only if
  you contain a square, there's probably others too) In this paper we make
  this intuition precise by showing that the right angled artin group functor
  embeds the category of graphs $\mathsf{Gph}$ into the category of groups $\Grp$.
  We also give \important{descent data} for recognizing graphs as a subcategory
  of groups, and take note of the parts of this theory which can be algorithmically
  decided.}

  \todo[inline]{rip off paragraph 2 of minasyan's paper}

  \todo[inline]{rip off section 2.2 of Charney's survey}

  Conversely, given a group $\Gamma$ we can take its \important{Commutation Graph}
  $C\Gamma$ whose vertices are elements of $\Gamma$ and we say 
  $(\gamma_1, \gamma_2) \in C\Gamma \iff [\gamma_1, \gamma_2] = 1$.
  These graphs have been of interest to combinatorialists 
  \todo{find some citations. Definitely look at old posts on Peter Cameron's blog}
  for decades, because of \todo{reasons}

  It's not hard to see that $C : \mathsf{Grp} \to \mathsf{Gph}$ is also a 
  functor, and indeed is right adjoint to $A : \mathsf{Gph} \to \mathsf{Grp}$
  (this has been noticed by many others \todo{citations}, and merely 
  expresses the usual universal property of raags)

  Now, given a group $\Gamma$, it's natural to ask if it is $AG$ for some 
  graph $G$. Moreover, given a group homomorphism $\varphi : AG \to AH$, it's 
  natural to ask when $\varphi = Af$ for some graph homomorphism $f : G \to H$.

  The main result of this paper is to completely characterize this situation.
  Indeed

  \begin{thm}
      $\Gamma \cong AG$ if and only if there is a group homomorphism 
      $\alpha : \Gamma \to AC\Gamma$ making a certian diagram 
      commute (see \ref{coalg}).

      Moreover, a group homomorphism $\varphi : AG \to AH$ is of the form
      $Af$ for some $f : G \to H$ if and only if the following square commutes:

      \[
          \begin{tikzcd}
          AG && AH \\
          \\
          ACAG && ACAH
          \arrow["\varphi", from=1-1, to=1-3]
          \arrow["AC\varphi", from=3-1, to=3-3]
          \arrow["{A \eta}"{description}, from=1-1, to=3-1]
          \arrow["A\eta"{description}, from=1-3, to=3-3]
          \end{tikzcd}
      \]
  \end{thm}

  Here $\eta : G \to CAG$ is the natural embedding of $G$ into $CAG$.
  Notice this square does not automatically commute, since the vertical
  arrows are $A \eta$, which is not the functor we applied to $\varphi$.

  In section \ref{eg}, we will give an example of this machinery in action
  to show that it doesn't require any knowledge of advanced category theory
  to apply this result. Afterwards, in section \ref{review} 
  we will briefly review \important{comonadic descent} in order to apply it
  to the case of raags in section \ref{proof}. Lastly, in section \ref{computing}
  we show that this condition is algorithmically checkable. 



  \todo{go through and reread the papers about this. I forget exactly what's known}

\section{An Instructive Example}
\label{eg}

We will use results from category theory in order to prove this theorem,
but it's important to note that this result is still of use to those who 
do not wish to learn about comonadic descent. Before seeing the proof,
let's see an example of how the result can be used to detect whether a group 
homomorphism came from a graph homomorphism or not.

\todo{standardize greek/roman lettering}

\todo{also, proofread this for professionalism}

Let $\Gamma = \{ v \}$ and $\Delta = \{ w \}$ be two one-vertex graphs.
Then $A \Gamma = \langle v \rangle$ and $A \Delta = \langle w \rangle$,
and we want to detect when a homomorphism between these groups came from a
homomorphism of their underlying graphs.

Well, $CA \Gamma$ is the complete graph on $\mathbb{Z}$ many vertices, each
representing one of the $v^n \in A \Gamma$. 
Then $\eta : \Gamma \to CA \Gamma$ sends $v \mapsto v^1$ in this graph,
and the construction for $\Delta$ is the same.

As a warning, notice that $ACA\Gamma = \langle v^n \mid [v^n, v^m] = 1 \rangle$
is generated by \emph{formal symbols} named $v^n$. In particular,
$v^2 v^3 \neq v^5$ in this group. The first is a word of length $2$, the latter
is a word of length $1$, and there are no relations saying we can combine
the symbols.

\bigskip

Let's first look at a map that \emph{does} come from a graph homomorphism.
Say, $f : \langle v \rangle \to \langle w \rangle$ given by $fv = w$.

Then we want to consult the square

\[\begin{tikzcd}
	{\langle v \rangle} && {\langle w \rangle} \\
	\\
	{\langle v^n \mid [v^n,v^m] = 1 \rangle} && {\langle w^n \mid [w^n, w^m] = 1 \rangle}
	\arrow["{v \mapsto w}", from=1-1, to=1-3]
	\arrow["{v^n \mapsto w^n}", from=3-1, to=3-3]
	\arrow["{v \mapsto v^1}"{description}, from=1-1, to=3-1]
	\arrow["{w \mapsto w^1}"{description}, from=1-3, to=3-3]
\end{tikzcd}\]

which clearly does commute. This tells us that $f$ comes from a graph homomorphism,
as indeed it did!

\bigskip

Next, let's look at a map which \emph{doesn't} come from a graph homomorphism.
Say, $g : \langle v \rangle \to \langle w \rangle$ given by $gv = w^2$.

Now our square is

\[\begin{tikzcd}
	{\langle v \rangle} && {\langle w \rangle} \\
	\\
	{\langle v^n \mid [v^n,v^m] = 1 \rangle} && {\langle w^n \mid [w^n, w^m] = 1 \rangle}
	\arrow["{v \mapsto w^2}", from=1-1, to=1-3]
	\arrow["{v^n \mapsto w^{2n}}", from=3-1, to=3-3]
	\arrow["{v \mapsto v^1}"{description}, from=1-1, to=3-1]
	\arrow["{w \mapsto w^1}"{description}, from=1-3, to=3-3]
\end{tikzcd}\]

which does \emph{not} commute (even though it seems to at first glance). 
Indeed, if we chase the image of $v$ around the top right of the square, then
(remembering righthand map is $w \mapsto w^1$, where $w^1$ is a formal symbol):

\[ v \mapsto w^2 \mapsto (w^1)^2 \]

If instead we chase around the lower left of the square, we get:

\[ v \mapsto v^1 \mapsto w^2 \]

since $(w^1)^2 \neq w^2$ in this group, we have successfully detected that 
$f$ did \emph{not} come from a graph homomorphism!

\section{A Brief Review of Comonadic Descent}
\label{review}

Recall that an adjunction
$(L : \catC \to \catD) \dashv (R : \catD \to \catC)$
induces a \emph{monad} $RL : \catC \to \catC$ and a \emph{comonad}
$LR : \catD \to \catD$.

By a comonad, we mean a functor $W : \catD \to \catD$ equipped with natural
transformations $\epsilon : W \Rightarrow 1_\catD$ and $\delta : W \Rightarrow WW$
so that the following diagrams commute:

\[
    \begin{tikzcd}
    & W &&& W & WW \\
    W & WW & W && WW & WWW
    \arrow["{1_W \cdot \epsilon}", Rightarrow, from=2-2, to=2-1]
    \arrow["{\epsilon \cdot 1_W}"', Rightarrow, from=2-2, to=2-3]
    \arrow["\delta", Rightarrow, from=1-2, to=2-2]
    \arrow["{1_W}"', Rightarrow, from=1-2, to=2-1]
    \arrow["{1_W}", Rightarrow, from=1-2, to=2-3]
    \arrow["\delta"', Rightarrow, from=1-5, to=2-5]
    \arrow["\delta", Rightarrow, from=1-5, to=1-6]
    \arrow["{\delta \cdot 1_W}"', Rightarrow, from=2-5, to=2-6]
    \arrow["{1_W \cdot \delta}", Rightarrow, from=1-6, to=2-6]
    \end{tikzcd}
\]

Monads and comonads find application in settings as varied as universal algebra 
\cite{borceuxCategoriesStructures1994, 
adamekAlgebraicTheoriesCategorical2011,
bojanczykRecognisableLanguagesMonads2015,
awodeyCoalgebraicDualBirkhoff2000,
hylandCategoryTheoreticUnderstanding2007}, 
probability theory 
\cite{giryCategoricalApproachProbability1982,
culbertsonCategoricalFoundationBayesian2014,
leinsterCodensityUltrafilterMonad2013}, 
and computer science 
\cite{moggiNotionsComputationMonads1991,
depaivaDialecticaComonads2021,
ghaniAlgebrasCoalgebrasMonads2001,
ruttenUniversalCoalgebraTheory2000}.
Relevant for us is the theory of \important{(co)monadic descent}, 
which comes from gluing conditions in algebraic geometry
\cite{grothendieckTechniqueDescenteTheoremes1960}, and is reviewed in
\cite{borceuxCategoriesStructures1994}.

A \important{$W$-coalgebra} is an object
$A \in \catD$ equipped with an arrow $\alpha : A \to WA$ so that the
diagrams in figure \ref{coalg} commute. A \important{$W$-cohomomorphism}
between coalgebras $(A,\alpha)$ and $(B,\beta)$ is an arrow $f : A \to B$
in $\mathcal{D}$ compatible with $\alpha$ and $\beta$, in the sense that 
figure \ref{cohom} commutes. When $W$ is clear from context, we simply call these
coalgebras and cohomomorphisms, and they assemble into a category $\catD_W$
which admits a faithful functor $U : \catD_W \to \catD$ where we 
simply forget the structure map $\alpha$.

\begin{figure}
    \caption{The defining diagrams for a coalgebra}
    \label{coalg}
    \[
        \begin{tikzcd}
        A & WA && A & WA \\
        & A && WA & WWA
        \arrow["\alpha", from=1-1, to=1-2]
        \arrow["{\epsilon_A}", from=1-2, to=2-2]
        \arrow["{1_A}"', from=1-1, to=2-2]
        \arrow["\alpha"', from=1-4, to=2-4]
        \arrow["\alpha", from=1-4, to=1-5]
        \arrow["\delta"', from=2-4, to=2-5]
        \arrow["W\alpha", from=1-5, to=2-5]
        \end{tikzcd}
    \]
\end{figure}

\begin{figure}
    \caption{The defining diagram for a cohomomorphism}
    \label{cohom}
    \[
        \begin{tikzcd}
        A & B \\
        WA & WB
        \arrow["\alpha", from=1-1, to=2-1]
        \arrow["\beta", from=1-2, to=2-2]
        \arrow["f", from=1-1, to=1-2]
        \arrow["Wf"', from=2-1, to=2-2]
        \end{tikzcd}
    \]    
\end{figure}

Now, each group $AG$ is automatically a coalgebra with structure map
$A \eta : AG \to ACAG$, so that $A$ factors through $\Grp_{AC}$.
\todo{ok, I guess we do need to say what $\eta$ is\ldots}
We will show that $A$ is actually an equivalence of categories 
$\mathsf{Gph} \simeq \Grp_{AC}$. Then we will see that a group is of the
form $AG$ if and only it's a coalgebra, and a group homomorphism is of the
form $Af$ if and only if it's a cohomomorphism!

The main tool for proving $\mathsf{Gph} \simeq \Grp_{AC}$ is Beck's famed
\important{(Co)Monadicity Theorem}\footnote{The original manuscript due to Beck 
was unpublished, but widely distributed. A scan is available at
\cite{beckBeckMonadicityTheoremPdf}, but a textbook reference can be
found as theorem 4.4.4 in \cite{borceuxCategoriesStructures1994}. Both of 
these prove the statement for \emph{monads}, which is then dualized to give
the comonadic version we use.}, which says

\begin{thm}[Beck, 1968]
    $A$ is an equivalence of categories $\mathsf{Gph} \simeq \Grp_{AC}$ 
    if and only if

    \begin{enumerate}
        \item $A$ reflects isomorphisms (that is, $A\Gamma \cong A\Delta$ if and only if $\Gamma \cong \Delta$)
        \item $\mathsf{Gph}$ has, and $A$ preserves, ``equalizers of coreflexive pairs''
    \end{enumerate}
\end{thm}

It's well known that $(1)$ holds \cite{dromsIsomorphismsGraphGroups1987}, 
so it remains to check $(2)$. We're off to a good start since $\mathsf{Gph}$
is complete, and thus has all equalizers. In the next section we'll recall
the definition of a coreflexive pair, and show that $A$ really does satisfy
preserve their equalizers.

\section{Applying Descent to Raags}
\label{proof}

A \important{coreflexive pair} is a pair of arrows with a common retract. 
A situation

\[\begin{tikzcd}
	\Gamma && \Delta
	\arrow["\alpha", shift left=3, from=1-1, to=1-3]
	\arrow["\beta"', shift right=3, from=1-1, to=1-3]
	\arrow["\rho"{description}, from=1-3, to=1-1]
\end{tikzcd}\]

where $\rho \alpha = 1_\Gamma = \rho \beta$.

Now, we want to show that if $\Theta$ is the equalizer of $\alpha$ and $\beta$,
as computed in $\mathsf{Gph}$, 
then $A\Theta$ should still be the equalizer of $A \alpha$ and $A \beta$, 
as computed in $\mathsf{Grp}$.

Well thankfully, $\Theta$ is pretty easy to understand. It's the full subgraph
of $\Gamma$ on those vertices where $\alpha v = \beta v$.

So then $A\Theta = \langle v \mid \alpha v = \beta v \rangle \leq A \Gamma$.

What about the equalizer as computed in $\mathsf{Grp}$? Well, that's also not
so bad. It's the group $G = \{ g \mid \alpha g = \beta g \} \leq A\Gamma$.

Since $A\Theta$ is obviously a subgroup of $G$, all we need to do is show that 
$G$ is a subgroup of $A\Theta$! 

That is, we need to show that when 
$\alpha$ and $\beta$ admit a common retract $\rho$,
any group element $g$ with $\alpha g = \beta g$ should be a word in the
vertices $v$ with $\alpha v =  \beta v$.

\begin{thm}
    $A$ preserves equalizers of coreflexive pairs
\end{thm}

\todo{check this for professionalism}

\begin{proof}
    First, since $\rho \alpha = 1_\Gamma = \rho \beta$, we know that $\alpha$ and
    $\beta$ are both strongly injective on vertices. By this we mean that not 
    only are $\alpha$ and $\beta$ injective, but moreover if
    $\alpha v = \beta w$, then $v = w$.

    Next, since $\rho$ is a graph
    hom, we see that $v$ and $w$ are $\Gamma$-related if and only if $\alpha v$
    and $\alpha w$ (resp. $\beta v$ and $\beta w$) are $\Delta$-related. Thus 
    $v$ and $w$ commute in $A \Gamma$ if and only if their images under $\alpha$
    (resp. $\beta$) commute in $A \Delta$.

    Now, in Charney's \emph{An Introduction to RAAGs} \todo{cash this out for a real citation}
    (\href{https://people.brandeis.edu/~charney/papers/RAAGfinal.pdf}{here}),
    section $2.3$ ``The Word Problem'' shows that for each $g \in A\Gamma$,
    there's a minimal length word $g = w_0 w_1 \ldots w_k$ so that each 
    $w_i$ is a word in the vertices of $\Gamma$, and each $w_i$ is of maximal 
    length so that the letters in some fixed $w_i$ mutually commute.

    Moreover, this decomposition $g = w_0 w_1 \ldots w_k$ is unique up to 
    commuting the letters in each fixed $w_i$.

    So now, let's say that $\alpha g = \beta g$. Fix such a decomposition
    $g = w_0 w_1 \ldots w_k$, and look at 

    \[ (\alpha w_0) (\alpha w_1) \ldots (\alpha w_k) = (\beta w_0) (\beta w_1) \ldots (\beta w_k) \]

    these representations of $\alpha g = \beta g$ are both minimal length, as 
    we could hit a shorter representation with $\rho$ in order to get a 
    shorter representation for $g$. So then, by the uniqueness of canonical form 
    described in Charney's paper, 
    we see that each $\alpha w_i$ and $\beta w_i$ are equal up to permuting the 
    letters in each. 
    
    So we restrict attention to each 
    $w_i = \gamma_1^{n_1} \gamma_2^{n_2} \ldots \gamma_k^{n_k}$ separately, say

    \[ 
    (\alpha \gamma_1^{n_1}) (\alpha \gamma_2^{n_2}) \ldots (\alpha \gamma_k^{n_k}) = 
    \delta_1^{n_1} \delta_2^{n_2} \ldots \delta_k^{n_k} =
    (\beta \gamma_1^{n_1}) (\beta \gamma_2^{n_2}) \ldots (\beta \gamma_k^{n_k})
    \]

    The fear is that we have a situation where 

    \begin{itemize}
        \item $\alpha \gamma_1 = \delta_1$
        \item $\alpha \gamma_2 = \delta_2$
        \item $\beta \gamma_1 = \delta_2$
        \item $\beta \gamma_2 = \delta_1$
    \end{itemize}

    so that ``accidentally'' $\alpha(\gamma_1 \gamma_2) = \beta(\gamma_1 \gamma_2)$.

    But these kinds of situations are not possible because $\rho$ implies that
    $\alpha$ and $\beta$ are (strongly) injective!

    Indeed, recall that $\alpha$ and $\beta$ give injections from $\{ \gamma_1 \ldots, \gamma_k \}$
    to $\{ \delta_1, \ldots, \delta_k \}$, which are in fact bijections since we're
    dealing with finite sets of the same cardinality. 

    Moreover, by assumption $\rho$ provides an inverse for $\alpha$ \emph{and} 
    for $\beta$!

    Then $\alpha$ and $\beta$ must be the same map on this set, and in particular
    each $\gamma_i$ satisfies $\alpha \gamma_i = \beta \gamma_i$, as desired.
\end{proof}

\section{Can we Really Compute These?}
\label{computing}

It is well known that the problem 
``is a finitely presented group $G$ isomorphic to a raag'' 
is undecidable. Indeed, being isomorphic to a raag is a 
\emph{Markov property} in the sense of Definition 3.1 in 
\todo{cite decision problems survey and reflections}. Then by 3.3 in
the same paper, our question is undecidable.

In the language of this paper, it is undecdiable whether a given
(finitely presented) group is an $AC$-coalgebra. However, once we know
that a group is an $AC$-coalgebra, we can already read off the combinatorics
of our graph from just this data. Indeed, since $\mathsf{Gph}$ is equivalent
to $\Grp_{AC}$, any categorical question about our graph can be answered 
using only the abstract group $G$ with its structure morphism $\alpha : G \to ACG$.

For instance, given a graph $\Gamma$, its vertices are in bijection with
graph homomorphisms $1 \to \Gamma$, where $1$ is the unique graph with one vertex.
This tells us how to find the graph $\Gamma$ with $G \cong A\Gamma$ using
only the coalgebra structure $(G,\alpha)$. Since $A 1 = \mathbb{Z}$,
vertices of $\Gamma$ are in bijection with cohomomorphisms 
$(\mathbb{Z}, A \eta_1) \to (G, \alpha)$. 

This also lets us check if a group homomorphism $f : G \to H$ is
$A \varphi$ for some graph homomorphism, provided we know that $G$ 
and $H$ are raags. If we're given the graphs $\Gamma$ and $\Delta$
presenting $G$ and $H$ then this is easy -- we just ask if $f$ sends 
each generator of $G$ to a generator of $H$. We would expect things to
be just as easy if we're given the coalgebra stuctures 
$\alpha : G \to ACG$ and $\beta : H \to ACH$. Indeed this is the case,
and our algorithm avoids the (expensive) computation of graphs $\Gamma$
and $\Delta$ presenting $G$ and $H$.

\begin{thm}
    Given a group homomorphism $f : G \to H$ where $(G,\alpha)$ and $(H,\beta)$
    are finitely presented $AC$-coalgebras, there is an algorithm deciding 
    whether $f$ is $A \varphi$ for $\varphi$ a graph homomorphism of the graphs 
    presenting $G$ and $H$.
\end{thm}

\begin{proof}
    By the equivalence $\mathsf{Gph} \simeq \Grp_{AC}$, this amounts to 
    checking if $f$ is a cohomomorphism. That is, whether the square

    \[
        \begin{tikzcd}
            G & H \\
            ACG & ACH
            \arrow["f", from=1-1, to=1-2]
            \arrow["\alpha"', from=1-1, to=2-1]
            \arrow["ACf"', from=2-1, to=2-2]
            \arrow["\beta", from=1-2, to=2-2]
        \end{tikzcd}
    \]

    commutes. Of course, we can check this on the (finitely many) generators, 
    and the claim now follows from the fact that raags have decidable 
    word problem\footnote{Importantly, this is true even if we are using a 
    nonstandard generating set. One way to see this is to use the fact
    that all raags are CAT(0) and that all CAT(0) 
    groups have decidable word problem, regardless of presentation.}
    \todo{citations for these footnote claims}
\end{proof}


\section{Conclusion}
\label{conclusion}



\todo{ this comonad was useful, and it stands to reason the monad should be 
useful too. In fact, this seems to be related to the extension graph of\ldots
Kim and Koberda? Add a citation }

\newpage
\nocite{*}
\bibliographystyle{plain}
\bibliography{bib.bib}

\end{document}
